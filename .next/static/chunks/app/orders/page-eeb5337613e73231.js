(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1778],{1647:(e,s,t)=>{"use strict";t.d(s,{E:()=>c});var r=t(5155);t(2115);var a=t(3101),l=t(4269);let i=(0,a.F)("inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-white hover:bg-secondary/80",destructive:"border-transparent bg-danger text-white hover:bg-danger/80",outline:"text-text-primary border-gray-300",success:"border-transparent bg-accent text-white hover:bg-accent/80"}},defaultVariants:{variant:"default"}});function c(e){let{className:s,variant:t,...a}=e;return(0,r.jsx)("div",{className:(0,l.cn)(i({variant:t}),s),...a})}},1873:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(5105).A)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},3998:(e,s,t)=>{"use strict";t.d(s,{$:()=>d});var r=t(5155),a=t(2115),l=t(2467),i=t(3101),c=t(4269);let n=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-2xl text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:scale-105 disabled:hover:scale-100",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-danger text-white hover:bg-danger/90",outline:"border-2 border-primary text-primary hover:bg-primary hover:text-white",secondary:"bg-secondary text-white hover:bg-secondary/90",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-12 px-6 py-3",sm:"h-9 rounded-lg px-3",lg:"h-14 rounded-2xl px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,s)=>{let{className:t,variant:a,size:i,asChild:d=!1,...o}=e,x=d?l.DX:"button";return(0,r.jsx)(x,{className:(0,c.cn)(n({variant:a,size:i,className:t})),ref:s,...o})});d.displayName="Button"},4269:(e,s,t)=>{"use strict";t.d(s,{$g:()=>i,cn:()=>l});var r=t(2821),a=t(5889);function l(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.QP)((0,r.$)(s))}function i(e){return new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW"}).format(e)}},5694:(e,s,t)=>{"use strict";t.d(s,{default:()=>i});var r=t(5155),a=t(5239),l=t(2115);function i(e){let{src:s,alt:t,fill:i=!1,width:c,height:n,className:d="",priority:o=!1,fallbackText:x="Y",sizes:m}=e,[h,u]=(0,l.useState)(!1);return h?(0,r.jsx)("div",{className:"".concat(d," bg-primary/10 rounded-lg flex items-center justify-center"),children:(0,r.jsx)("span",{className:"text-primary font-bold text-lg",children:x})}):(0,r.jsx)(a.default,{src:s,alt:t,fill:i,width:c,height:n,className:d,priority:o,sizes:m,onError:()=>u(!0)})}},6617:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(5105).A)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},6623:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var r=t(5155),a=t(6489),l=t(2115),i=t(2619),c=t.n(i),n=t(6948),d=t(3998),o=t(1647),x=t(5694),m=t(9559),h=t(6617);let u=(0,t(5105).A)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);var p=t(8519),f=t(1873),y=t(7828);let g={pending:{label:"주문 대기",color:"bg-yellow-100 text-yellow-800"},confirmed:{label:"주문 확인",color:"bg-blue-100 text-blue-800"},shipped:{label:"배송 중",color:"bg-purple-100 text-purple-800"},delivered:{label:"배송 완료",color:"bg-green-100 text-green-800"},cancelled:{label:"주문 취소",color:"bg-red-100 text-red-800"}},j={pending:{label:"결제 대기",color:"bg-yellow-100 text-yellow-800"},completed:{label:"결제 완료",color:"bg-green-100 text-green-800"},failed:{label:"결제 실패",color:"bg-red-100 text-red-800"}};function b(){var e;let{data:s,status:t}=(0,a.useSession)(),[i,b]=(0,l.useState)([]),[v,N]=(0,l.useState)(!0),[w,k]=(0,l.useState)(null);(0,l.useEffect)(()=>{(null==s?void 0:s.user)&&A()},[s]);let A=async()=>{if(null==s?void 0:s.user){N(!0);try{let e=await fetch("/api/orders");if(e.ok){let s=await e.json();b(s.orders||[])}else console.error("주문 내역 조회 실패")}catch(e){console.error("주문 내역 조회 중 오류:",e)}finally{N(!1)}}},C=async e=>{if(confirm("정말로 이 주문을 취소하시겠습니까?"))try{let s=await fetch("/api/orders/".concat(e,"/cancel"),{method:"PUT"});if(s.ok)alert("주문이 취소되었습니다."),A();else{let e=await s.json();alert("주문 취소 실패: ".concat(e.error))}}catch(e){console.error("주문 취소 중 오류:",e),alert("주문 취소 중 오류가 발생했습니다.")}};return"loading"===t||v?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):s?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-emerald-50 py-12",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 max-w-6xl",children:[(0,r.jsxs)("div",{className:"text-center mb-12",children:[(0,r.jsx)("div",{className:"flex justify-center mb-6",children:(0,r.jsx)("div",{className:"relative w-20 h-20",children:(0,r.jsx)(x.default,{src:"/character/youniqle-2.png",alt:"Youniqle 캐릭터",fill:!0,className:"object-contain",sizes:"80px"})})}),(0,r.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"주문 내역"}),(0,r.jsxs)("p",{className:"text-xl text-gray-600",children:[null==(e=s.user)?void 0:e.name,"님의 주문 내역입니다"]})]}),(0,r.jsx)("div",{className:"flex justify-end mb-6",children:(0,r.jsxs)(d.$,{variant:"outline",onClick:A,className:"flex items-center",children:[(0,r.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"새로고침"]})}),0===i.length?(0,r.jsx)(n.Zp,{className:"shadow-lg",children:(0,r.jsxs)(n.Wu,{className:"p-12 text-center",children:[(0,r.jsx)("div",{className:"flex justify-center mb-6",children:(0,r.jsx)(h.A,{className:"h-16 w-16 text-gray-400"})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"주문 내역이 없습니다"}),(0,r.jsxs)("p",{className:"text-gray-600 mb-6",children:["아직 주문한 상품이 없습니다.",(0,r.jsx)("br",{}),"다양한 상품을 둘러보고 첫 주문을 시작해보세요!"]}),(0,r.jsx)(d.$,{asChild:!0,children:(0,r.jsx)(c(),{href:"/products",children:"상품 둘러보기"})})]})}):(0,r.jsx)("div",{className:"space-y-6",children:i.map(e=>(0,r.jsxs)(n.Zp,{className:"shadow-lg hover:shadow-xl transition-shadow",children:[(0,r.jsx)(n.aR,{children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)(n.ZB,{className:"flex items-center",children:[(0,r.jsx)(h.A,{className:"h-5 w-5 mr-2"}),"주문번호: ",e.orderNumber]}),(0,r.jsxs)("div",{className:"flex items-center mt-2 space-x-4 text-sm text-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(u,{className:"h-4 w-4 mr-1"}),new Date(e.createdAt).toLocaleDateString("ko-KR")]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(p.A,{className:"h-4 w-4 mr-1"}),e.totalAmount.toLocaleString(),"원"]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col items-end space-y-2",children:[(0,r.jsx)(o.E,{className:g[e.status].color,children:g[e.status].label}),(0,r.jsx)(o.E,{className:j[e.paymentStatus].color,children:j[e.paymentStatus].label})]})]})}),(0,r.jsxs)(n.Wu,{children:[(0,r.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-700",children:"주문 상품"}),e.items.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center space-x-4 p-3 bg-gray-50 rounded-lg",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center",children:e.productId.images&&e.productId.images.length>0?(0,r.jsx)("img",{src:e.productId.images[0],alt:e.productId.name,className:"w-full h-full object-cover rounded-lg"}):(0,r.jsx)(h.A,{className:"h-8 w-8 text-gray-400"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(c(),{href:"/products/".concat(e.productId._id),className:"font-medium text-gray-900 hover:text-blue-600",children:e.productId.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[e.quantity,"개 \xd7 ",e.price.toLocaleString(),"원"]})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsxs)("p",{className:"font-semibold text-gray-900",children:[(e.quantity*e.price).toLocaleString(),"원"]})})]},s))]}),(0,r.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,r.jsxs)("h4",{className:"font-semibold text-gray-700 flex items-center",children:[(0,r.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"배송 정보"]}),(0,r.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-gray-700",children:e.shippingAddress.zipCode}),(0,r.jsx)("p",{className:"text-sm text-gray-700",children:e.shippingAddress.address1}),e.shippingAddress.address2&&(0,r.jsx)("p",{className:"text-sm text-gray-700",children:e.shippingAddress.address2}),e.shippingAddress.phone&&(0,r.jsxs)("p",{className:"text-sm text-gray-700",children:["연락처: ",e.shippingAddress.phone]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[(0,r.jsxs)(d.$,{variant:"outline",onClick:()=>k(e),className:"flex items-center",children:[(0,r.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"상세 보기"]}),"pending"===e.status&&(0,r.jsx)(d.$,{variant:"destructive",onClick:()=>C(e._id),children:"주문 취소"})]})]})]},e._id))}),w&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)(n.Zp,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)(n.aR,{children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)(n.ZB,{children:"주문 상세 정보"}),(0,r.jsx)(d.$,{variant:"ghost",onClick:()=>k(null),children:"✕"})]})}),(0,r.jsxs)(n.Wu,{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"주문 정보"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600",children:"주문번호"}),(0,r.jsx)("p",{className:"font-medium",children:w.orderNumber})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600",children:"주문일시"}),(0,r.jsx)("p",{className:"font-medium",children:new Date(w.createdAt).toLocaleString("ko-KR")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600",children:"주문 상태"}),(0,r.jsx)(o.E,{className:g[w.status].color,children:g[w.status].label})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600",children:"결제 상태"}),(0,r.jsx)(o.E,{className:j[w.paymentStatus].color,children:j[w.paymentStatus].label})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"결제 정보"}),(0,r.jsxs)("div",{className:"text-sm space-y-1",children:[(0,r.jsx)("p",{className:"text-gray-600",children:"결제 방법"}),(0,r.jsx)("p",{className:"font-medium",children:w.paymentMethod}),(0,r.jsx)("p",{className:"text-gray-600",children:"총 결제 금액"}),(0,r.jsxs)("p",{className:"font-medium text-lg",children:[w.totalAmount.toLocaleString(),"원"]})]})]})]})]})})]})}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)(n.Zp,{className:"w-full max-w-md",children:(0,r.jsxs)(n.Wu,{className:"p-8 text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"로그인이 필요합니다"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"주문 내역을 확인하려면 로그인해주세요."}),(0,r.jsx)(d.$,{asChild:!0,children:(0,r.jsx)("a",{href:"/auth/signin",children:"로그인하기"})})]})})})}},6948:(e,s,t)=>{"use strict";t.d(s,{Wu:()=>d,ZB:()=>n,Zp:()=>i,aR:()=>c});var r=t(5155),a=t(2115),l=t(4269);let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("rounded-2xl border bg-white text-gray-950 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1",t),...a})});i.displayName="Card";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...a})});c.displayName="CardHeader";let n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("h3",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});n.displayName="CardTitle",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("p",{ref:s,className:(0,l.cn)("text-sm text-gray-600",t),...a})}).displayName="CardDescription";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",t),...a})});d.displayName="CardContent",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},7245:(e,s,t)=>{Promise.resolve().then(t.bind(t,6623))},7828:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(5105).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8519:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(5105).A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},9559:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(5105).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])}},e=>{e.O(0,[5239,2619,1691,6489,8441,1255,7358],()=>e(e.s=7245)),_N_E=e.O()}]);