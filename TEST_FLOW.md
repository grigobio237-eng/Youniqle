# 🧪 파트너 시스템 테스트 플로우

## 📋 **테스트 준비**

### 1단계: 개발 서버 실행
```bash
npm run dev
```

### 2단계: 테스트 계정 확인
- 브라우저에서 `http://localhost:3000/test-setup` 접속
- 테스트 계정이 이미 생성되어 있는지 확인

### 3단계: 검증 체크리스트 열기
- `http://localhost:3000/test-checklist` 접속
- 각 테스트 항목을 체크하면서 진행

---

## 🎯 **핵심 테스트 시나리오**

### **시나리오 1: 파트너 신청 → 관리자 승인 → 파트너 기능 사용**

#### **1-1. 일반 사용자로 파트너 신청**
1. **로그인**: `user@youniqle.com` / `user123!`
2. **마이페이지 접속**: `http://localhost:3000/me`
3. **파트너 섹션 확인**:
   - 현재 상태: "파트너 신청하기" 버튼 표시
4. **파트너 신청**:
   - "파트너 신청하기" 버튼 클릭
   - 모달에서 사업자 정보 입력:
     - 사업자명: "테스트샵"
     - 사업자등록번호: "123-45-67891"
     - 사업자 주소: "서울시 강남구 테스트로 123"
       - 주소 검색 버튼으로 기본 주소 선택
       - 상세주소 입력: "101호, 2층"
     - 사업자 전화번호: "02-1234-5678"
     - 사업자 설명: "테스트용 파트너샵입니다"
     - 계좌번호: "123456789012"
     - 은행명: "국민은행"
     - 예금주: "이유저"
     - 사업자등록증 이미지 업로드
     - 통장사본 이미지 업로드
   - "신청하기" 버튼 클릭
5. **신청 완료 확인**:
   - 상태가 "검토 중"으로 변경
   - "재신청하기" 버튼 표시

#### **1-2. 관리자로 파트너 승인**
1. **관리자 로그인**: `admin@youniqle.com` / `admin123!`
2. **파트너 관리 페이지**: `http://localhost:3000/admin/login`
3. **신청된 파트너 확인**:
   - "이유저" 사용자의 파트너 신청 표시
   - 상태: "대기 중"
4. **파트너 승인**:
   - "승인" 버튼 클릭
   - 상태가 "승인됨"으로 변경

#### **1-3. 파트너로 로그인 및 기능 테스트**
1. **파트너 로그인**: `user@youniqle.com` / `user123!`
2. **파트너 전용 로그인**: `http://localhost:3000/partner/login`
3. **파트너 대시보드**: `http://localhost:3000/partner/dashboard`
   - 매출 통계 확인
   - 최근 주문 현황 확인
4. **상품 관리**: `http://localhost:3000/partner/products`

---

### **시나리오 2: 파트너 상품 등록 및 이미지 업로드**

#### **2-1. 상품 등록**
1. **파트너 로그인**: `partner@youniqle.com` / `partner123!`
2. **상품 관리 페이지**: `http://localhost:3000/partner/products`
3. **새 상품 등록**:
   - "상품 등록" 버튼 클릭
   - 상품 정보 입력:
     - 상품명: "테스트 상품"
     - 슬러그: "test-product"
     - 가격: 10000
     - 원가: 8000
     - 재고: 100
     - 카테고리: "테스트"
     - 상품 요약: "테스트용 상품입니다"
     - 상품 설명: "이것은 테스트를 위한 상품입니다."
   - "등록" 버튼 클릭

#### **2-2. 이미지 업로드 테스트**
1. **상품 등록 시 이미지 업로드**:
   - 파일 선택 버튼 클릭
   - 이미지 파일 선택 (JPEG, PNG 등)
   - 업로드 진행률 확인
   - 이미지 미리보기 확인
2. **이미지 삭제 테스트**:
   - 업로드된 이미지의 X 버튼 클릭
   - 이미지가 목록에서 제거되는지 확인

#### **2-3. 상품 수정 및 삭제**
1. **상품 수정**:
   - 상품 목록에서 "수정" 버튼 클릭
   - 상품 정보 변경
   - "수정" 버튼 클릭
2. **상품 삭제**:
   - 상품 목록에서 "삭제" 버튼 클릭
   - 확인 대화상자에서 "확인" 클릭
   - 상품과 연관 이미지가 모두 삭제되는지 확인

---

### **시나리오 3: 이미지 업로드/삭제 기능 검증**

#### **3-1. 리뷰 이미지 업로드**
1. **일반 사용자로 로그인**: `user@youniqle.com` / `user123!`
2. **상품 페이지 접속**: `http://localhost:3000/products/[상품ID]`
3. **리뷰 작성**:
   - 리뷰 섹션에서 "리뷰 작성" 클릭
   - 별점 선택
   - 리뷰 내용 입력
   - 이미지 파일 선택 및 업로드
   - "리뷰 등록" 클릭

#### **3-2. Vercel Blob 스토리지 확인**
1. **업로드된 이미지 URL 확인**:
   - 브라우저 개발자 도구 → Network 탭
   - 이미지 업로드 시 `/api/upload` 호출 확인
   - 응답에서 `blob.vercel-storage.com` URL 확인
2. **이미지 접근 테스트**:
   - 업로드된 이미지 URL을 새 탭에서 열기
   - 이미지가 정상적으로 표시되는지 확인

---

### **시나리오 4: 데이터베이스 검증**

#### **4-1. MongoDB 데이터 확인**
1. **사용자 데이터 확인**:
   - 파트너 신청 후 MongoDB에서 사용자 데이터 확인
   - `partnerStatus`, `partnerApplication` 필드 확인
2. **상품 데이터 확인**:
   - 상품 등록 후 `partnerId`, `partnerName` 필드 확인
3. **이미지 데이터 확인**:
   - 상품의 `images` 배열에 Vercel Blob URL 저장 확인

#### **4-2. 권한 검증**
1. **비승인 파트너 접근 차단**:
   - 승인되지 않은 파트너로 `/partner/dashboard` 접속 시도
   - 로그인 페이지로 리다이렉트되는지 확인
2. **관리자 권한 검증**:
   - 일반 사용자로 `/admin/partners` 접속 시도
   - 접근이 차단되는지 확인

---

## 🔍 **상세 테스트 항목**

### **파트너 시스템**
- [ ] 파트너 신청 폼 정상 작동
- [ ] 관리자 파트너 승인/거부 기능
- [ ] 파트너 전용 로그인 시스템
- [ ] 파트너 대시보드 통계 표시
- [ ] 파트너 상품 관리 (CRUD)
- [ ] 파트너 권한 기반 접근 제어

### **이미지 업로드/삭제**
- [ ] 다중 이미지 업로드
- [ ] 파일 형식 검증 (JPEG, PNG, GIF, WebP, AVIF)
- [ ] 파일 크기 제한 (10MB)
- [ ] 업로드 진행률 표시
- [ ] 이미지 미리보기
- [ ] 개별 이미지 삭제
- [ ] 상품 삭제 시 연관 이미지 자동 삭제
- [ ] Vercel Blob 스토리지 저장 확인

### **데이터베이스**
- [ ] MongoDB 파트너 데이터 저장
- [ ] 상품-파트너 연관 데이터
- [ ] 주문-파트너 연관 데이터
- [ ] 데이터 무결성 확인

### **보안 및 권한**
- [ ] JWT 토큰 기반 인증
- [ ] 파트너 전용 토큰 시스템
- [ ] 권한 기반 페이지 접근 제어
- [ ] API 엔드포인트 보안

---

## 🚨 **오류 시나리오 테스트**

### **네트워크 오류**
- [ ] 이미지 업로드 중 네트워크 오류
- [ ] 오류 메시지 표시
- [ ] 재시도 기능

### **파일 오류**
- [ ] 지원하지 않는 파일 형식 업로드
- [ ] 너무 큰 파일 업로드
- [ ] 빈 파일 업로드

### **권한 오류**
- [ ] 비로그인 사용자의 파일 업로드
- [ ] 권한 없는 사용자의 파트너 페이지 접근

---

## 📊 **성능 테스트**

### **이미지 업로드 성능**
- [ ] 대용량 이미지 업로드 시간 측정
- [ ] 다중 이미지 동시 업로드
- [ ] 업로드 진행률 표시 정확성

### **데이터베이스 성능**
- [ ] 파트너 데이터 조회 속도
- [ ] 상품 목록 로딩 속도
- [ ] 대시보드 통계 계산 속도

---

## ✅ **테스트 완료 기준**

모든 테스트가 성공하면 다음이 확인되어야 합니다:

1. **파트너 시스템 전체 플로우** 정상 작동
2. **이미지 업로드/삭제** 완벽 작동
3. **MongoDB 데이터 저장/조회** 정상 작동
4. **권한 기반 접근 제어** 정확한 동작
5. **오류 처리** 적절한 사용자 피드백
6. **빌드 성공** 및 타입 안정성

---

## 🎯 **테스트 완료 후 Git 푸시**

모든 테스트가 완료되면:

```bash
git add .
git commit -m "feat: 파트너 시스템 및 이미지 업로드 기능 구현

- 파트너 신청/승인 시스템 구현
- 파트너 전용 대시보드 및 상품 관리 기능
- Vercel Blob 기반 이미지 업로드/삭제 기능
- MongoDB 파트너 데이터 모델 확장
- 관리자 파트너 관리 기능
- 테스트 계정 생성 및 검증 체크리스트
- 파일 업로드/삭제 API 구현"

git push origin main
```

이제 테스트를 시작하세요! 🚀
